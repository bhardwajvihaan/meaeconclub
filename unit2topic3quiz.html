<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MEA Economics Club - Price Elasticity of Demand Quiz (AP Micro 2.3)</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans&display=swap" rel="stylesheet" />
<style>
  body {
    font-family: 'DM Sans', sans-serif;
    max-width: 900px;
    margin: 20px auto;
    padding: 0 15px 50px;
    background: #f9f9f9;
    color: #222;
  }
  h1 {
    text-align: center;
    margin-bottom: 0.3em;
  }
  form {
    background: white;
    padding: 20px 30px;
    border-radius: 8px;
    box-shadow: 0 0 8px #ccc;
  }
  .question {
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 1px solid #ddd;
  }
  .question:last-child {
    border-bottom: none;
  }
  .question-title {
    font-weight: 600;
    margin-bottom: 8px;
  }
  .options label {
    display: block;
    margin-bottom: 6px;
    cursor: pointer;
  }
  input[type="number"] {
    width: 100px;
    padding: 5px;
    font-size: 1rem;
    border: 1px solid #ccc;
    border-radius: 4px;
  }
  .submit-btn {
    display: block;
    margin: 30px auto 10px;
    font-size: 1.1rem;
    background: #2e7d32;
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  .submit-btn:hover {
    background: #27672a;
  }
  .error-msg {
    color: #d32f2f;
    font-weight: 600;
    margin-bottom: 15px;
    text-align: center;
  }
  .feedback {
    margin-top: 8px;
    padding: 8px 12px;
    border-radius: 5px;
  }
  .correct {
    background-color: #d4edda;
    color: #155724;
  }
  .incorrect {
    background-color: #f8d7da;
    color: #721c24;
  }
  .answer-text {
    font-weight: 600;
  }
</style>
</head>
<body>

<h1>MEA Economics Club - Price Elasticity of Demand Quiz</h1>
<p style="text-align:center; font-style: italic; margin-bottom: 30px;">AP Microeconomics CED Topic 2.3</p>

<form id="quizForm" novalidate>
  <!-- Questions will be inserted here by JS -->
</form>

<script>
  const questions = [
    {
      id: 1,
      type: "mcq",
      question: "Price elasticity of demand (PED) measures the responsiveness of:",
      options: [
        "Quantity demanded to a change in price",
        "Price to a change in quantity demanded",
        "Supply to a change in price",
        "Demand to a change in income"
      ],
      answer: "Quantity demanded to a change in price"
    },
    {
      id: 2,
      type: "mcq",
      question: "If PED is greater than 1, demand is considered:",
      options: [
        "Inelastic",
        "Unit elastic",
        "Elastic",
        "Perfectly inelastic"
      ],
      answer: "Elastic"
    },
    {
      id: 3,
      type: "mcq",
      question: "When demand is perfectly inelastic, the PED is equal to:",
      options: [
        "0",
        "1",
        "Infinity",
        "-1"
      ],
      answer: "0"
    },
    {
      id: 4,
      type: "mcq",
      question: "If a 10% increase in price causes a 5% decrease in quantity demanded, the PED is:",
      options: [
        "0.5",
        "-0.5",
        "-2",
        "2"
      ],
      answer: "-0.5"
    },
    {
      id: 5,
      type: "number",
      question: "Calculate the PED if price increases from $4 to $5 and quantity demanded decreases from 200 units to 180 units. (Round to 2 decimals)",
      answer: "-0.55"
    },
    {
      id: 6,
      type: "mcq",
      question: "If the PED = 1, demand is called:",
      options: [
        "Elastic",
        "Perfectly elastic",
        "Unit elastic",
        "Inelastic"
      ],
      answer: "Unit elastic"
    },
    {
      id: 7,
      type: "mcq",
      question: "Which good would most likely have inelastic demand?",
      options: [
        "Salt",
        "Luxury cars",
        "Restaurant meals",
        "Movie tickets"
      ],
      answer: "Salt"
    },
    {
      id: 8,
      type: "number",
      question: "If price decreases from $10 to $8 and quantity demanded increases from 500 to 600 units, calculate the PED (use midpoint formula). Round to 2 decimals.",
      answer: "-1.33"
    },
    {
      id: 9,
      type: "mcq",
      question: "A PED of zero means:",
      options: [
        "Quantity demanded does not change when price changes",
        "Quantity demanded changes proportionally to price",
        "Quantity demanded is infinitely responsive to price",
        "Demand is perfectly elastic"
      ],
      answer: "Quantity demanded does not change when price changes"
    },
    {
      id: 10,
      type: "mcq",
      question: "Total revenue increases when price decreases only if demand is:",
      options: [
        "Inelastic",
        "Elastic",
        "Unit elastic",
        "Perfectly inelastic"
      ],
      answer: "Elastic"
    },
    {
      id: 11,
      type: "number",
      question: "If the price increases by 20% and quantity demanded decreases by 10%, what is the PED? (Round to 2 decimals)",
      answer: "-0.50"
    },
    {
      id: 12,
      type: "mcq",
      question: "If demand is elastic, what happens to total revenue when price increases?",
      options: [
        "Total revenue increases",
        "Total revenue decreases",
        "Total revenue stays the same",
        "Cannot determine"
      ],
      answer: "Total revenue decreases"
    },
    {
      id: 13,
      type: "mcq",
      question: "Which of the following factors increases the price elasticity of demand?",
      options: [
        "Few substitutes available",
        "A large portion of consumer income spent on the good",
        "Necessity of the good",
        "Short time period"
      ],
      answer: "A large portion of consumer income spent on the good"
    },
    {
      id: 14,
      type: "mcq",
      question: "If the demand curve is a vertical line, the PED is:",
      options: [
        "Elastic",
        "Inelastic",
        "Unit elastic",
        "Perfectly inelastic"
      ],
      answer: "Perfectly inelastic"
    },
    {
      id: 15,
      type: "mcq",
      question: "If PED = -0.8, the demand is considered:",
      options: [
        "Elastic",
        "Inelastic",
        "Unit elastic",
        "Perfectly elastic"
      ],
      answer: "Inelastic"
    },
    {
      id: 16,
      type: "number",
      question: "Calculate the PED using midpoint method: Price changes from $15 to $10, quantity demanded from 100 to 140 units. Round to 2 decimals.",
      answer: "-1.14"
    },
    {
      id: 17,
      type: "mcq",
      question: "Which of these goods is most likely to have a PED close to infinity?",
      options: [
        "Perfect substitutes",
        "Necessities",
        "Goods with no substitutes",
        "Goods with brand loyalty"
      ],
      answer: "Perfect substitutes"
    },
    {
      id: 18,
      type: "mcq",
      question: "When demand is elastic, the absolute value of PED is:",
      options: [
        "Less than 1",
        "Equal to 1",
        "Greater than 1",
        "Equal to 0"
      ],
      answer: "Greater than 1"
    },
    {
      id: 19,
      type: "number",
      question: "If a 15% price increase leads to a 30% decrease in quantity demanded, calculate the PED (round to 2 decimals).",
      answer: "-2.00"
    },
    {
      id: 20,
      type: "mcq",
      question: "Which of the following will cause demand to be more elastic?",
      options: [
        "Goods that are necessities",
        "Short time horizons",
        "Availability of close substitutes",
        "Small budget share"
      ],
      answer: "Availability of close substitutes"
    }
  ];

  const form = document.getElementById('quizForm');

  function createQuestionHTML(q) {
    let html = `<div class="question" id="q${q.id}">`;
    html += `<div class="question-title">${q.id}. ${q.question}</div>`;
    if (q.type === "mcq") {
      html += `<div class="options">`;
      q.options.forEach((opt, idx) => {
        const inputId = `q${q.id}_opt${idx}`;
        html += `
          <label for="${inputId}">
            <input type="radio" name="q${q.id}" id="${inputId}" value="${opt}" />
            ${opt}
          </label>
        `;
      });
      html += `</div>`;
    } else if (q.type === "number") {
      html += `<input type="number" step="any" name="q${q.id}" id="q${q.id}_num" />`;
    }
    html += `<div class="feedback" id="feedback${q.id}" style="display:none;"></div>`;
    html += `</div>`;
    return html;
  }

  function roundToTwo(num) {
    return Math.round((num + Number.EPSILON) * 100) / 100;
  }

  function isCloseEnough(input, correct) {
    // Compare numeric answers allowing small rounding difference
    const nInput = parseFloat(input);
    const nCorrect = parseFloat(correct);
    if (isNaN(nInput) || isNaN(nCorrect)) return false;
    return Math.abs(nInput - nCorrect) < 0.05; // within 0.05 is accepted
  }

  function showFeedback() {
    let score = 0;
    questions.forEach(q => {
      const feedbackDiv = document.getElementById(`feedback${q.id}`);
      feedbackDiv.style.display = "block";

      let userAnswer;
      if (q.type === "mcq") {
        const radios = document.getElementsByName(`q${q.id}`);
        userAnswer = "";
        radios.forEach(radio => {
          if (radio.checked) userAnswer = radio.value;
        });
      } else {
        userAnswer = document.querySelector(`input[name="q${q.id}"]`).value.trim();
      }

      let correct;
      if (q.type === "number") {
        correct = q.answer;
      } else {
        correct = q.answer;
      }

      let correctAnswerText = `Correct answer: <span class="answer-text">${correct}</span>`;
      let yourAnswerText = `Your answer: <span class="answer-text">${userAnswer || "<em>none</em>"}</span>`;

      let isCorrect = false;
      if (q.type === "number") {
        isCorrect = isCloseEnough(userAnswer, correct);
      } else {
        isCorrect = userAnswer === correct;
      }

      if (isCorrect) {
        score++;
        feedbackDiv.className = "feedback correct";
        feedbackDiv.innerHTML = `${yourAnswerText} ✓`;
      } else {
        feedbackDiv.className = "feedback incorrect";
        feedbackDiv.innerHTML = `${yourAnswerText} ✗<br>${correctAnswerText}`;
      }
    });
    return score;
  }

  function validateAnswers() {
    for (let q of questions) {
      if (q.type === "mcq") {
        const radios = document.getElementsByName(`q${q.id}`);
        let answered = false;
        radios.forEach(radio => {
          if (radio.checked) answered = true;
        });
        if (!answered) {
          alert(`Please answer question ${q.id} before submitting.`);
          return false;
        }
      } else {
        const input = document.querySelector(`input[name="q${q.id}"]`);
        if (!input.value.trim()) {
          alert(`Please answer question ${q.id} before submitting.`);
          return false;
        }
      }
    }
    return true;
  }

  function buildQuiz() {
    questions.forEach(q => {
      form.insertAdjacentHTML('beforeend', createQuestionHTML(q));
    });
    form.insertAdjacentHTML('beforeend', `<button type="submit" class="submit-btn">Submit Quiz</button>`);
  }

  form.addEventListener('submit', e => {
    e.preventDefault();

    if (!validateAnswers()) return;

    const score = showFeedback();
    alert(`You scored ${score} out of ${questions.length}!`);

    // Disable inputs after submit
    form.querySelectorAll('input').forEach(input => input.disabled = true);
    form.querySelector('.submit-btn').disabled = true;
  });

  buildQuiz();
</script>

</body>
</html>
